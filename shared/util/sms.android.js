// @flow
import {Linking} from 'react-native'

// based loosely off of https://github.com/anarchicknight/react-native-communications/blob/master/AKCommunications.js
// returns the promise generated by RN Linking helper
//      resolve => url opened
//      reject => user stopped the action / url didn't open
const openSMS = (phoneno: string, body?: string): Promise<any> => {
  const proto = 'sms:'
  let query = ''
  if (body) {
    query = `?body=${body}`
  }

  const url = proto + phoneno + query
  if (Linking.canOpenURL(url)) {
    return Linking.openURL(url)
  }
  return Promise.reject(new Error('Cannot open SMS url!'))
}

export default openSMS
